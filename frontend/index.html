<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="script.js" defer></script>
</head>

<body>
    <header>
        <div class="header-left">
            <h1>Market Overview</h1>
            <p id="last-updated">Last Updated: --</p>
        </div>

        <div class="header-controls">
            <div class="control-group">
                <label for="change-period">Change</label>
                <select id="change-period">
                    <option value="1d" selected>1D</option>
                    <option value="1w">1W</option>
                    <option value="1m">1M</option>
                    <option value="3m">3M</option>
                    <option value="6m">6M</option>
                    <option value="1y">1Y</option>
                </select>
            </div>

            <div class="control-group">
                <label for="drawdown-period">Drawdown</label>
                <select id="drawdown-period">
                    <option value="1m">1M</option>
                    <option value="3m">3M</option>
                    <option value="6m">6M</option>
                    <option value="1y" selected>1Y</option>
                    <option value="5y">5Y</option>
                </select>
            </div>

            <button id="refresh-btn">
                <span class="btn-text">Refresh</span>
                <span class="btn-icon">â†»</span>
            </button>

            <div class="theme-toggle" title="Toggle Theme">
                <input type="checkbox" id="theme-switch">
                <label for="theme-switch"></label>
            </div>
        </div>
    </header>

    <main>
        <div class="table-container">
            <table id="stock-table">
                <thead>
                    <tr>
                        <th data-sort="name">Symbol <span class="sort-icon"></span></th>
                        <th data-sort="latest_price">Price <span class="sort-icon"></span></th>
                        <th data-sort="relative_perf_1y">Alpha (YTD) <span class="sort-icon"></span></th>
                        <th data-sort="daily_change_pct">Change <span class="sort-icon"></span></th>
                        <th class="trend-header">Trend (30d)</th>
                        <th data-sort="rsi14">RSI <span class="sort-icon"></span></th>
                        <th data-sort="z_score_100">Log Z-Score (100d) <span class="sort-icon"></span></th>
                        <th data-sort="ema13">EMA 13 <span class="sort-icon"></span></th>
                        <th data-sort="ema21">EMA 21 <span class="sort-icon"></span></th>
                        <th data-sort="ema_signal">Signal (S) <span class="sort-icon"></span></th>
                        <th data-sort="ema_short_buy_duration">Dur (S) <span class="sort-icon"></span></th>
                        <th data-sort="ema100">EMA 100 <span class="sort-icon"></span></th>
                        <th data-sort="ema200">EMA 200 <span class="sort-icon"></span></th>
                        <th data-sort="ema_long_signal">Signal (L) <span class="sort-icon"></span></th>
                        <th data-sort="ema_long_last_buy_date">Dur (L) <span class="sort-icon"></span></th>
                        <th data-sort="current_drawdown_pct">Drawdown <span class="sort-icon"></span></th>
                    </tr>
                </thead>
                <tbody id="stock-table-body">
                    <!-- Rows generated by JS -->
                </tbody>
            </table>
        </div>
    </main>

    <div id="chart-popup" class="chart-popup">
        <div class="popup-header">
            <h3 id="popup-title">Symbol</h3>
            <span id="popup-price"></span>
        </div>
        <div class="chart-wrapper">
            <canvas id="popup-canvas"></canvas>
        </div>
    </div>

</body>

</html>